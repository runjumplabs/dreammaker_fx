<!doctype html>
<html lang="en">
<head>
  <!-- Required meta tags -->
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <!-- Bootstrap CSS -->
  <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
  <link href="/static/style.css">

  <!-- add after bootstrap.min.css -->
  <link rel="stylesheet" href="https://cdn.rawgit.com/afeld/bootstrap-toc/v0.3.0/dist/bootstrap-toc.min.css">

  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.10/styles/default.min.css">

  <link rel="stylesheet" href="/dreammaker_fx/assets/css/github-markdown.css">

  <title>Harmonic_tremelo - DreamMakerFX</title>


  <style>
    .markdown-body {
      box-sizing: border-box;
      min-width: 200px;
      max-width: 980px;
      margin: 0 auto;
      padding: 45px;
    }

    @media (max-width: 767px) {
      .markdown-body {
        padding: 15px;
      }
    }
  </style>

</head>

<body  data-spy="scroll" data-target="#toc">
 <nav>

</nav>


<div class="d-flex flex-column flex-md-row align-items-center p-3 px-md-4 mb-3 bg-white border-bottom shadow-sm">
  <a href="/"><img src="/dreammaker_fx/assets/images/dfx_logo.png"></a>
  <h5 class="my-0 mr-md-auto font-weight-normal"></h5>
  <nav class="my-2 my-md-0 mr-md-3">

  
    <a class="p-2 text-dark" href="/dreammaker_fx/" >Home</a>
  
    <a class="p-2 text-dark" href="/dreammaker_fx/browse" >Browse Effects</a>
  
    <a class="p-2 text-dark" href="/dreammaker_fx/docs/" >Docs</a>
  

  </nav>

</div>

 

 <div class="container">
  <h5>Harmonic_tremelo </h3>
<ul>
<li>Created by:  </li>
<li>Minimum firmware ver:  </li>
<li>Description:  </li>
</ul>
<strong>Arduino sketch</strong>
<pre><code class="cpp" style="arduino">#include "dm_fx.h"

/*
A harmonic tremelo is basically a pair of tremelos that are 180ยบ out of 
phase.  The first tremelo is run through a low pass filter and the second
tremelo is run through a high pass filter.  The result is a tremelo type 
sounds but the volume remains rather constant.

             +-------+    +----------------------+    +-------+
             |       |    |                      |    |       |
             | LPF   |    | Tremelo              |    |       |
         +-->+ 500Hz +--->+ (0ยบ initial phase)   +--->+       +-+
         |   |       |    |                      |    |       | |
         |   +-------+    +----------------------+    |       | |
Instr In |                                            | Mix 2 |  > Amp Out
         |   +-------+    +----------------------+    |       | |
         |   |       |    |                      |    |       | |
         +-->+ HPF   +--->+ Tremelo              +--->+       +-+
             | 500Hz |    | (180ยบ initial phase) |    |       |
             |       |    |                      |    |       |
             +-------+    +----------------------+    +-------+

 */

// Amplitude modulator #1
fx_amplitude_mod    mod1(1.0,     // Rate (Hz)
                         0.8,     // Depth (0.0->1.0)
                         0,       // Initial phase (degrees)
                         OSC_SINE,// Oscillator type
                         false);  // Don't use external LFO
// Amplitude modulator #2                         
fx_amplitude_mod    mod2(1.0,     // Rate (Hz)
                         0.8,     // Depth (0.0->1.0)
                         180,     // Initial phase (degrees)
                         OSC_SINE,// Oscillator type 
                         false);  // Don't use external LFO

// Filters for splitting low and high ends
fx_biquad_filter    lpf(500.0,              // Initial filter cutoff freq
                        FILTER_WIDTH_NARROW,// Filter Q / width
                        BIQUAD_TYPE_LPF);   // Filter type
                        
fx_biquad_filter    hpf(500.0,              // Initial filter cutoff freq
                        FILTER_WIDTH_NARROW,// Filter Q / width
                        BIQUAD_TYPE_HPF);   // Filter type


// Simple two channel mixer
fx_mixer_2    mix2;

 void setup() {

  pedal.init();

  pedal.route_audio(pedal.instr_in, lpf.input);
  pedal.route_audio(pedal.instr_in, hpf.input);
  pedal.route_audio(lpf.output, mod1.input);
  pedal.route_audio(hpf.output, mod2.input);
  
  pedal.route_audio(mod1.output, mix2.input_1);
  pedal.route_audio(mod2.output, mix2.input_2);

  pedal.route_audio(mix2.output, pedal.amp_out);

  // Optional code to print out the routing details to console
  if (true) {
    pedal.print_instance_stack();
    pedal.print_routing_table();
    pedal.print_param_tables();
  }
  
  // Run this effect
  pedal.run(); 


}


void loop() {

  static int now = millis();

  // Run pedal service to take care of stuff
  pedal.service();

  // Pot 0 changes the rate of the tremelo from 0 to 4Hz
  if (pedal.pot_0.has_changed()) {
    mod1.set_rate_hz(pedal.pot_0.val*4.0);
    mod2.set_rate_hz(pedal.pot_0.val*4.0);
  }

  // Pot 1 changes cross over frequency between 300 and 700Hz
  if (pedal.pot_1.has_changed()) {
    lpf.set_freq(500.0 + pedal.pot_1.val*400.0);
    hpf.set_freq(500.0 + pedal.pot_1.val*400.0);
  }

  // Pot 2 not working yet
  if (pedal.pot_2.has_changed()) {
  }

}

</code></pre>

</div>

<!-- Optional JavaScript -->
<!-- jQuery first, then Popper.js, then Bootstrap JS -->
<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
<script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v0.3.0/dist/bootstrap-toc.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.10/highlight.min.js"></script>

<script>

  document.addEventListener('DOMContentLoaded', (event) => {
    document.querySelectorAll('pre code').forEach((block) => {
      hljs.highlightBlock(block);
    });
  });
</script>


</body>
</html>