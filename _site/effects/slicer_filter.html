<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <link href="/static/style.css">

    <!-- add after bootstrap.min.css -->
    <link rel="stylesheet" href="https://cdn.rawgit.com/afeld/bootstrap-toc/v0.3.0/dist/bootstrap-toc.min.css">

	<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.10/styles/default.min.css">

    <title>Slicer_filter - DreamMakerFX</title>
  </head>

  <body  data-spy="scroll" data-target="#toc">
  	<nav>

</nav>


<div class="d-flex flex-column flex-md-row align-items-center p-3 px-md-4 mb-3 bg-white border-bottom shadow-sm">
  <a href="/"><img src="/dreammaker_fx/assets/images/dfx_logo.png"></a>
  <h5 class="my-0 mr-md-auto font-weight-normal"></h5>
  <nav class="my-2 my-md-0 mr-md-3">

  
    <a class="p-2 text-dark" href="/dreammaker_fx/" >Home</a>
  
    <a class="p-2 text-dark" href="/dreammaker_fx/browse" >Browse Effects</a>
  
    <a class="p-2 text-dark" href="/dreammaker_fx/docs/" >Docs</a>
  

  </nav>

</div>

    

    <div class="container">
      <h5>Slicer_filter </h3>
<ul>
<li>Created by:  </li>
<li>Minimum firmware ver:  </li>
<li>Description:  </li>
</ul>
<strong>Arduino sketch</strong>
<pre><code class="cpp" style="arduino">#include "dm_fx.h"

/*

 The slicer switches between output channels at a predefined rate.  It is 
 great for creating interesting rhymic effects.  This effect sends each channel
 of the slicer through band-pass filters that are tuned to different center
 frequencies.  The outputs of the filters are then mixed together using a 
 simple 4 channel mixer.
  
               +------------+   +-------------+   +---------+
               |            +-->+ BPF @ 200Hz +-->+         |
               |            |   +-------------+   |         |
               |            |   +-------------+   |         |
               |            +-->+ BPF @ 1200Hz+-->+         |
Instr In +---->+ Slicer x 4 |   +-------------+   | Mixer4  +----> Amp Out
               |            |   +-------------+   |         |
               |            +-->+ BPF @ 500Hz +-->+         |
               |            |   +-------------+   |         |
               |            |   +-------------+   |         |
               |            +-->+ BPF @ 800Hz +-->+         |
               +------------+   +-------------+   +---------+

 */

// Set up a slicer for four channels
fx_slicer   slice4(1000.0, 4);

// Instances of the four bandpass (BPF) filters at different frequencies
fx_biquad_filter  filt1(200, FILTER_WIDTH_NARROW, BIQUAD_TYPE_BPF);
fx_biquad_filter  filt2(1000, FILTER_WIDTH_NARROW, BIQUAD_TYPE_BPF);
fx_biquad_filter  filt3(500, FILTER_WIDTH_NARROW, BIQUAD_TYPE_BPF);
fx_biquad_filter  filt4(800, FILTER_WIDTH_NARROW, BIQUAD_TYPE_BPF);
fx_mixer_4 mix4;

bool go = false;
bool running = false;

void setup() {

  pedal.init();

  pedal.route_audio(pedal.instr_in, slice4.input);
  
  pedal.route_audio(slice4.output_1, filt1.input);
  pedal.route_audio(slice4.output_2, filt2.input);
  pedal.route_audio(slice4.output_3, filt3.input);
  pedal.route_audio(slice4.output_4, filt4.input);

  pedal.route_audio(filt1.output, mix4.input_1);
  pedal.route_audio(filt2.output, mix4.input_2);
  pedal.route_audio(filt3.output, mix4.input_3);
  pedal.route_audio(filt4.output, mix4.input_4);
  
  pedal.route_audio(mix4.output, pedal.amp_out);

  // Optional code to print out the routing details to console
  if (true) {
    pedal.print_instance_stack();
    pedal.print_routing_table();
    pedal.print_param_tables();
  }

  // Run this effect
  pedal.run(); 

}

void loop() {

  static int now = millis();

  // Run pedal service to take care of stuff
  pedal.service();

  // Set period of slicer from 100ms through 3 seconds
  if (pedal.pot_0.has_changed()) {
    slice4.set_period_ms(100.0 + 3000.0 * (1.0 - pedal.pot_0.val));
  }

  if (pedal.pot_1.has_changed()) {
  }
  
  if (pedal.pot_2.has_changed()) {
  }

}

</code></pre>

    </div>

    <!-- Optional JavaScript -->
     <!-- jQuery first, then Popper.js, then Bootstrap JS -->
     <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
     <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
     <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
     <script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v0.3.0/dist/bootstrap-toc.min.js"></script>
     <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.10/highlight.min.js"></script>

     <script>

document.addEventListener('DOMContentLoaded', (event) => {
  document.querySelectorAll('pre code').forEach((block) => {
    hljs.highlightBlock(block);
  });
});
     </script>


  </body>
</html>